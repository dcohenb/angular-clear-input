angular.module("dcbClearInput",[]).directive("clearInput",["$parse",function($parse){return{restrict:"A",require:"ngModel",link:function(scope,element,attr){var htmlMarkup=attr.clearBtnMarkup?attr.clearBtnMarkup:"<span>&times;</span>",btn=angular.element(htmlMarkup);btn.addClass(attr.clearBtnClass?attr.clearBtnClass:"clear-btn"),element.after(btn),btn.on("click",function(event){if(attr.clearInput){var fn=$parse(attr.clearInput);scope.$apply(function(){fn(scope,{$event:event})})}else scope[attr.ngModel]=null,scope.$digest()}),scope.$watch(attr.ngModel,function(val){var hasValue=val&&val.length>0;attr.clearDisableVisibility||btn.css("visibility",hasValue?"visible":"hidden"),hasValue&&!btn.hasClass("clear-visible")?btn.removeClass("clear-hidden").addClass("clear-visible"):hasValue||btn.hasClass("clear-hidden")||btn.removeClass("clear-visible").addClass("clear-hidden")})}}}]);